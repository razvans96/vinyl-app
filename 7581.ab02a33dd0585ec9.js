"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7581],{7581:(v,m,r)=>{r.r(m),r.d(m,{SongDetailsPageModule:()=>A});var l=r(4755),h=r(5030),i=r(712),p=r(237),e=r(3020),u=r(5830),_=r(7556);function n(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"ion-buttons",8)(1,"ion-button",9),e.NdJ("click",function(){e.CHM(t);const d=e.oxw();return e.KtG(d.deleteSong())}),e._UZ(2,"ion-icon",10),e.qZA()()}}function s(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const d=e.oxw().$implicit,f=e.oxw(2);return e.KtG(f.deleteComment(d))}),e._UZ(1,"ion-icon",22),e.qZA()}}function g(o,c){if(1&o&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA()(),e.YNc(8,s,2,0,"ion-button",20),e.qZA()),2&o){const t=c.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(t.author),e.xp6(2),e.Oqu(t.comment),e.xp6(2),e.Oqu(t.rating),e.xp6(1),e.Q6J("ngIf",a.isLoggedIn())}}function S(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-grid")(2,"ion-row")(3,"ion-col",11)(4,"ion-card"),e._UZ(5,"img",12),e.TgZ(6,"ion-card-header")(7,"ion-card-subtitle"),e._uU(8),e.qZA(),e.TgZ(9,"ion-card-title"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-card-content")(12,"ion-list")(13,"ion-item"),e._UZ(14,"ion-icon",13),e.TgZ(15,"ion-label"),e._uU(16),e.qZA()(),e.TgZ(17,"ion-item"),e._UZ(18,"ion-icon",14),e.TgZ(19,"ion-label"),e._uU(20),e.ALo(21,"date"),e.qZA()()()()()(),e.TgZ(22,"ion-col",11)(23,"ion-row")(24,"ion-col",15)(25,"h3")(26,"strong"),e._uU(27,"Comments"),e.qZA()()()(),e.TgZ(28,"ion-list"),e.YNc(29,g,9,4,"ion-item",16),e.qZA(),e.TgZ(30,"ion-row")(31,"ion-col",17)(32,"ion-button",18),e.NdJ("click",function(){e.CHM(t);const d=e.oxw();return e.KtG(d.goToAddComment())}),e._UZ(33,"ion-icon",19),e.qZA()()()()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("src",t.song.photo?t.song.photo:t.song.photobase64,e.LSH),e.xp6(3),e.Oqu(t.song.artist),e.xp6(2),e.Oqu(t.song.title),e.xp6(6),e.Oqu(t.song.artist),e.xp6(4),e.Oqu(e.lcZ(21,6,t.song.date)),e.xp6(9),e.Q6J("ngForOf",t.comments)}}const T=[{path:"",component:(()=>{class o{constructor(t,a,d,f){this.apiService=t,this.activatedRoute=a,this.router=d,this.authService=f,this.song={_id:"",title:"",artist:"",date:new Date,photo:"",photobase64:"",location:{latitude:0,longitude:0,accuracy:0},user:""},this.comments=[]}ngOnInit(){this.loadSong()}loadSong(){this.activatedRoute.paramMap.subscribe(t=>{const a=t.get("id");a&&(this.apiService.getSong(a).then(d=>{this.song=d,this.getComments(),console.log(this.song)}),console.log("Song ID:",a))})}getComments(){this.apiService.getComments(this.song._id).then(t=>{this.comments=t,console.log(this.comments)})}navigateHome(){this.router.navigate(["/home"])}deleteSong(){window.confirm("Are you sure you want to delete the song?")&&this.apiService.deleteSong(this.song._id).then(t=>{console.log(t),this.router.navigate(["/home"])})}isLoggedIn(){return this.authService.isLoggedIn()}goToAddComment(){this.router.navigate(["/add-comment",this.song._id])}deleteComment(t){window.confirm("Are you sure you want to delete the comment?")&&this.apiService.deleteComment(t).then(a=>{console.log(a),this.getComments()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.s),e.Y36(p.gz),e.Y36(p.F0),e.Y36(_.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-song-details"]],decls:10,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],[3,"click"],["name","home"],["slot","end",4,"ngIf"],[3,"fullscreen"],["size-md","8","offset-md","2"],[4,"ngIf"],["slot","end"],["color","danger",3,"click"],["name","trash"],["size","12","size-sm","6"],[3,"src"],["name","person"],["name","calendar"],["size-xs","12","size-md","4","offset-md","4"],[4,"ngFor","ngForOf"],["size-xs","12","size-md","4","offset-md","6"],["position","floating",3,"click"],["shape","round","name","add-sharp"],["color","danger","slot","end",3,"click",4,"ngIf"],["color","danger","slot","end",3,"click"],["name","trash-sharp"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return a.navigateHome()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.YNc(5,n,3,0,"ion-buttons",4),e.qZA()(),e.TgZ(6,"ion-content",5)(7,"ion-row")(8,"ion-col",6),e.YNc(9,S,34,8,"div",7),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("ngIf",a.isLoggedIn()),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngIf",a.song))},dependencies:[l.sg,l.O5,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.wI,i.W2,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.Nd,i.sr,l.uU]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(T),p.Bz]}),o})();var y=r(4546);let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,h.u5,i.Pc,Z,y.O]}),o})()},5830:(v,m,r)=>{r.d(m,{s:()=>e});var l=r(5861),h=r(2340),i=r(3020),p=r(3144);let e=(()=>{class u{constructor(n){this.http=n,this.apiUrl=h.N.apiUrl}getSongs(){var n=this;return(0,l.Z)(function*(){return yield(yield fetch(`${n.apiUrl}/song`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()})()}searchSongs(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/song${n}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()})()}searchSpotifySongs(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/spotifySearch${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}})).json()})()}getSong(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/song/${n}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()})()}postSong(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/song`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(n)})).json()})()}deleteSong(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/song/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}})).json()})()}getComments(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/song/${n}/comment`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()})()}postComment(n){var s=this;return(0,l.Z)(function*(){const g=n.song;return yield(yield fetch(`${s.apiUrl}/song/${g}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()})()}deleteComment(n){var s=this;return(0,l.Z)(function*(){return yield(yield fetch(`${s.apiUrl}/song/${n.song}/comment/${n._id}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}})).json()})()}}return u.\u0275fac=function(n){return new(n||u)(i.LFG(p.eN))},u.\u0275prov=i.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);