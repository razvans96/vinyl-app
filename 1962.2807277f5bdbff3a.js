"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1962],{1962:(v,d,m)=>{m.r(d),m.d(d,{AddCommentPageModule:()=>C});var c=m(4755),r=m(5030),n=m(712),s=m(237),l=m(5861),g=m(6090),t=m(3020),h=m(5830);const p=[{path:"",component:(()=>{class e{constructor(o,i,u,A){this.apiService=o,this.router=i,this.formBuilder=u,this.activatedRoute=A,this.comment={_id:"",comment:"",song:"",author:"",rating:0,location:{latitude:0,longitude:0,accuracy:0}},this.songId="",this.latitude=0,this.longitude=0,this.accuracy=0}ngOnInit(){this.getCurrentPosition(),this.getSongId(),this.commentForm=this.formBuilder.group({comment:["",r.kI.required],rating:["",r.kI.required],author:["",r.kI.required]})}getCurrentPosition(){var o=this;return(0,l.Z)(function*(){const i=yield g.b.getCurrentPosition();o.latitude=i.coords.latitude,o.longitude=i.coords.longitude,o.accuracy=i.coords.accuracy,console.log("LATITUD: "+o.latitude),console.log("LONGITUD: "+o.longitude),console.log("PRECISI\xd3N: "+o.accuracy)})()}getSongId(){this.activatedRoute.paramMap.subscribe(o=>{const i=o.get("id");i&&(this.songId=i,console.log("Song ID:",i))})}addComment(){this.commentForm.valid&&(this.comment={_id:"",comment:this.commentForm.value.comment,song:this.songId,author:this.commentForm.value.author,rating:this.commentForm.value.rating,location:{latitude:this.latitude,longitude:this.longitude,accuracy:this.accuracy}},console.log(this.comment),this.apiService.postComment(this.comment).then(o=>{console.log(o),this.router.navigate(["/song/"+this.songId])}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.s),t.Y36(s.F0),t.Y36(r.qu),t.Y36(s.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-comment"]],decls:21,vars:5,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],[3,"fullscreen"],["size-md","6","offset-md","3"],[1,"form-box"],[1,"form",3,"formGroup","ngSubmit"],[1,"title"],["placeholder","Author","type","text","formControlName","author",1,"input"],["placeholder","Comment","type","text","formControlName","comment",1,"input"],["position","floating"],["snaps","true","step","1","ticks","true","min","0","max","5","formControlName","rating",3,"pin"],["type","submit",3,"disabled"]],template:function(o,i){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA()()(),t.TgZ(4,"ion-content",2)(5,"ion-row")(6,"ion-col",3)(7,"div",4)(8,"form",5),t.NdJ("ngSubmit",function(){return i.addComment()}),t.TgZ(9,"span",6),t._uU(10,"Add comment"),t.qZA(),t.TgZ(11,"ion-item"),t._UZ(12,"ion-input",7),t.qZA(),t.TgZ(13,"ion-item"),t._UZ(14,"ion-textarea",8),t.qZA(),t.TgZ(15,"ion-item")(16,"ion-label",9),t._uU(17,"Rating"),t.qZA(),t._UZ(18,"ion-range",10),t.qZA(),t.TgZ(19,"ion-button",11),t._uU(20,"Submit"),t.qZA()()()()()()),2&o&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(4),t.Q6J("formGroup",i.commentForm),t.xp6(10),t.Q6J("pin",!0),t.xp6(1),t.Q6J("disabled",!i.commentForm.valid))},dependencies:[r._Y,r.JJ,r.JL,r.sg,r.u,n.oU,n.YG,n.Sm,n.wI,n.W2,n.Gu,n.pK,n.Ie,n.Q$,n.I_,n.Nd,n.g2,n.sr,n.QI,n.j9,n.cs]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(p),s.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,r.UX,n.Pc,f]}),e})()}}]);